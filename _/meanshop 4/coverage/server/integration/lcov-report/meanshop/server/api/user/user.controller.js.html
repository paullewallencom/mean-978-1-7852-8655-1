<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for meanshop/server/api/user/user.controller.js</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../../../../prettify.css">
    <link rel="stylesheet" href="../../../../base.css">
    <style type='text/css'>
        div.coverage-summary .sorter {
            background-image: url(../../../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class="header low">
    <h1>Code coverage report for <span class="entity">meanshop/server/api/user/user.controller.js</span></h1>
    <h2>
        Statements: <span class="metric">32.73% <small>(18 / 55)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Branches: <span class="metric">8.33% <small>(1 / 12)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Functions: <span class="metric">9.09% <small>(2 / 22)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Lines: <span class="metric">32.73% <small>(18 / 55)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../../index.html">All files</a> &#187; <a href="index.html">meanshop/server/api/user/</a> &#187; user.controller.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">'use strict';
&nbsp;
var User = require('./user.model');
var passport = require('passport');
var config = require('../../config/environment');
var jwt = require('jsonwebtoken');
&nbsp;
<span class="fstat-no" title="function not covered" >function validationError(res, statusCode) {</span>
<span class="cstat-no" title="statement not covered" >  statusCode = statusCode || 422;</span>
<span class="cstat-no" title="statement not covered" >  return <span class="fstat-no" title="function not covered" >function (err) {</span></span>
<span class="cstat-no" title="statement not covered" >    res.status(statusCode).json(err);</span>
  };
}
&nbsp;
<span class="fstat-no" title="function not covered" >function handleError(res, statusCode) {</span>
<span class="cstat-no" title="statement not covered" >  statusCode = statusCode || 500;</span>
<span class="cstat-no" title="statement not covered" >  return <span class="fstat-no" title="function not covered" >function (err) {</span></span>
<span class="cstat-no" title="statement not covered" >    res.status(statusCode).send(err);</span>
  };
}
&nbsp;
<span class="fstat-no" title="function not covered" >function respondWith(res, statusCode) {</span>
<span class="cstat-no" title="statement not covered" >  statusCode = statusCode || 200;</span>
<span class="cstat-no" title="statement not covered" >  return <span class="fstat-no" title="function not covered" >function () {</span></span>
<span class="cstat-no" title="statement not covered" >    res.status(statusCode).end();</span>
  };
}
&nbsp;
/**
 * Get list of users
 * restriction: 'admin'
 */
exports.index = <span class="fstat-no" title="function not covered" >function (req, res) {</span>
<span class="cstat-no" title="statement not covered" >  User.findAsync({}, '-salt -hashedPassword').then(<span class="fstat-no" title="function not covered" >function (users) {</span></span>
<span class="cstat-no" title="statement not covered" >    res.status(200).json(users);</span>
  })['catch'](handleError(res));
};
&nbsp;
/**
 * Creates a new user
 */
exports.create = <span class="fstat-no" title="function not covered" >function (req, res, next) {</span>
<span class="cstat-no" title="statement not covered" >  var newUser = new User(req.body);</span>
<span class="cstat-no" title="statement not covered" >  newUser.provider = 'local';</span>
<span class="cstat-no" title="statement not covered" >  newUser.role = 'user';</span>
<span class="cstat-no" title="statement not covered" >  newUser.saveAsync().spread(<span class="fstat-no" title="function not covered" >function (user) {</span></span>
<span class="cstat-no" title="statement not covered" >    var token = jwt.sign({ _id: user._id }, config.secrets.session, {</span>
      expiresInMinutes: 60 * 5
    });
<span class="cstat-no" title="statement not covered" >    res.json({ token: token });</span>
  })['catch'](validationError(res));
};
&nbsp;
/**
 * Get a single user
 */
exports.show = <span class="fstat-no" title="function not covered" >function (req, res, next) {</span>
<span class="cstat-no" title="statement not covered" >  var userId = req.params.id;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  User.findByIdAsync(userId).then(<span class="fstat-no" title="function not covered" >function (user) {</span></span>
<span class="cstat-no" title="statement not covered" >    if (!user) {</span>
<span class="cstat-no" title="statement not covered" >      return res.status(404).end();</span>
    }
<span class="cstat-no" title="statement not covered" >    res.json(user.profile);</span>
  })['catch'](<span class="fstat-no" title="function not covered" >function (err) {</span>
<span class="cstat-no" title="statement not covered" >    return next(err);</span>
  });
};
&nbsp;
/**
 * Deletes a user
 * restriction: 'admin'
 */
exports.destroy = <span class="fstat-no" title="function not covered" >function (req, res) {</span>
<span class="cstat-no" title="statement not covered" >  User.findByIdAndRemoveAsync(req.params.id).then(<span class="fstat-no" title="function not covered" >function () {</span></span>
<span class="cstat-no" title="statement not covered" >    res.status(204).end();</span>
  })['catch'](handleError(res));
};
&nbsp;
/**
 * Change a users password
 */
exports.changePassword = <span class="fstat-no" title="function not covered" >function (req, res, next) {</span>
<span class="cstat-no" title="statement not covered" >  var userId = req.user._id;</span>
<span class="cstat-no" title="statement not covered" >  var oldPass = String(req.body.oldPassword);</span>
<span class="cstat-no" title="statement not covered" >  var newPass = String(req.body.newPassword);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >  User.findByIdAsync(userId).then(<span class="fstat-no" title="function not covered" >function (user) {</span></span>
<span class="cstat-no" title="statement not covered" >    if (user.authenticate(oldPass)) {</span>
<span class="cstat-no" title="statement not covered" >      user.password = newPass;</span>
<span class="cstat-no" title="statement not covered" >      return user.saveAsync().then(<span class="fstat-no" title="function not covered" >function () {</span></span>
<span class="cstat-no" title="statement not covered" >        res.status(204).end();</span>
      })['catch'](validationError(res));
    } else {
<span class="cstat-no" title="statement not covered" >      return res.status(403).end();</span>
    }
  });
};
&nbsp;
/**
 * Get my info
 */
exports.me = function (req, res, next) {
  var userId = req.user._id;
&nbsp;
  User.findOneAsync({ _id: userId }, '-salt -hashedPassword').then(function (user) {
    // don't ever give out the password or salt
    <span class="missing-if-branch" title="if path not taken" >I</span>if (!user) {
<span class="cstat-no" title="statement not covered" >      return res.status(401).end();</span>
    }
    res.json(user);
  })['catch'](<span class="fstat-no" title="function not covered" >function (err) {</span>
<span class="cstat-no" title="statement not covered" >    return next(err);</span>
  });
};
&nbsp;
/**
 * Authentication callback
 */
exports.authCallback = <span class="fstat-no" title="function not covered" >function (req, res, next) {</span>
<span class="cstat-no" title="statement not covered" >  res.redirect('/');</span>
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hZHJpYW4vY29kZS9tZWFuc2hvcC9zZXJ2ZXIvYXBpL3VzZXIvdXNlci5jb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQzs7QUFFYixJQUFJLElBQUksR0FBRyxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUM7QUFDbkMsSUFBSSxRQUFRLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ25DLElBQUksTUFBTSxHQUFHLE9BQU8sQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO0FBQ2pELElBQUksR0FBRyxHQUFHLE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQzs7QUFFbEMsU0FBUyxlQUFlLENBQUMsR0FBRyxFQUFFLFVBQVUsRUFBRTtBQUN4QyxZQUFVLEdBQUcsVUFBVSxJQUFJLEdBQUcsQ0FBQztBQUMvQixTQUFPLFVBQVMsR0FBRyxFQUFFO0FBQ25CLE9BQUcsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0dBQ2xDLENBQUE7Q0FDRjs7QUFFRCxTQUFTLFdBQVcsQ0FBQyxHQUFHLEVBQUUsVUFBVSxFQUFFO0FBQ3BDLFlBQVUsR0FBRyxVQUFVLElBQUksR0FBRyxDQUFDO0FBQy9CLFNBQU8sVUFBUyxHQUFHLEVBQUU7QUFDbkIsT0FBRyxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7R0FDbEMsQ0FBQztDQUNIOztBQUVELFNBQVMsV0FBVyxDQUFDLEdBQUcsRUFBRSxVQUFVLEVBQUU7QUFDcEMsWUFBVSxHQUFHLFVBQVUsSUFBSSxHQUFHLENBQUM7QUFDL0IsU0FBTyxZQUFXO0FBQ2hCLE9BQUcsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7R0FDOUIsQ0FBQztDQUNIOzs7Ozs7QUFNRCxPQUFPLENBQUMsS0FBSyxHQUFHLFVBQVMsR0FBRyxFQUFFLEdBQUcsRUFBRTtBQUNqQyxNQUFJLENBQUMsU0FBUyxDQUFDLEVBQUUsRUFBRSx1QkFBdUIsQ0FBQyxDQUN4QyxJQUFJLENBQUMsVUFBUyxLQUFLLEVBQUU7QUFDcEIsT0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7R0FDN0IsQ0FBQyxTQUNJLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7Q0FDNUIsQ0FBQzs7Ozs7QUFLRixPQUFPLENBQUMsTUFBTSxHQUFHLFVBQVMsR0FBRyxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUU7QUFDeEMsTUFBSSxPQUFPLEdBQUcsSUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ2pDLFNBQU8sQ0FBQyxRQUFRLEdBQUcsT0FBTyxDQUFDO0FBQzNCLFNBQU8sQ0FBQyxJQUFJLEdBQUcsTUFBTSxDQUFDO0FBQ3RCLFNBQU8sQ0FBQyxTQUFTLEVBQUUsQ0FDaEIsTUFBTSxDQUFDLFVBQVMsSUFBSSxFQUFFO0FBQ3JCLFFBQUksS0FBSyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxHQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRSxFQUFFLE1BQU0sQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFO0FBQzlELHNCQUFnQixFQUFFLEVBQUUsR0FBRyxDQUFDO0tBQ3pCLENBQUMsQ0FBQztBQUNILE9BQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQztHQUM1QixDQUFDLFNBQ0ksQ0FBQyxlQUFlLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztDQUNoQyxDQUFDOzs7OztBQUtGLE9BQU8sQ0FBQyxJQUFJLEdBQUcsVUFBUyxHQUFHLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRTtBQUN0QyxNQUFJLE1BQU0sR0FBRyxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQzs7QUFFM0IsTUFBSSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FDdkIsSUFBSSxDQUFDLFVBQVMsSUFBSSxFQUFFO0FBQ25CLFFBQUksQ0FBQyxJQUFJLEVBQUU7QUFDVCxhQUFPLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7S0FDOUI7QUFDRCxPQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztHQUN4QixDQUFDLFNBQ0ksQ0FBQyxVQUFTLEdBQUcsRUFBRTtBQUNuQixXQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztHQUNsQixDQUFDLENBQUM7Q0FDTixDQUFDOzs7Ozs7QUFNRixPQUFPLENBQUMsT0FBTyxHQUFHLFVBQVMsR0FBRyxFQUFFLEdBQUcsRUFBRTtBQUNuQyxNQUFJLENBQUMsc0JBQXNCLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FDdkMsSUFBSSxDQUFDLFlBQVc7QUFDZixPQUFHLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO0dBQ3ZCLENBQUMsU0FDSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0NBQzVCLENBQUM7Ozs7O0FBS0YsT0FBTyxDQUFDLGNBQWMsR0FBRyxVQUFTLEdBQUcsRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFO0FBQ2hELE1BQUksTUFBTSxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDO0FBQzFCLE1BQUksT0FBTyxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQzNDLE1BQUksT0FBTyxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDOztBQUUzQyxNQUFJLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUN2QixJQUFJLENBQUMsVUFBUyxJQUFJLEVBQUU7QUFDbkIsUUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxFQUFFO0FBQzlCLFVBQUksQ0FBQyxRQUFRLEdBQUcsT0FBTyxDQUFDO0FBQ3hCLGFBQU8sSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUNwQixJQUFJLENBQUMsWUFBVztBQUNmLFdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7T0FDdkIsQ0FBQyxTQUNJLENBQUMsZUFBZSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7S0FDaEMsTUFBTTtBQUNMLGFBQU8sR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztLQUM5QjtHQUNGLENBQUMsQ0FBQztDQUNOLENBQUM7Ozs7O0FBS0YsT0FBTyxDQUFDLEVBQUUsR0FBRyxVQUFTLEdBQUcsRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFO0FBQ3BDLE1BQUksTUFBTSxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDOztBQUUxQixNQUFJLENBQUMsWUFBWSxDQUFDLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxFQUFFLHVCQUF1QixDQUFDLENBQ3hELElBQUksQ0FBQyxVQUFTLElBQUksRUFBRTs7QUFDbkIsUUFBSSxDQUFDLElBQUksRUFBRTtBQUNULGFBQU8sR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztLQUM5QjtBQUNELE9BQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7R0FDaEIsQ0FBQyxTQUNJLENBQUMsVUFBUyxHQUFHLEVBQUU7QUFDbkIsV0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7R0FDbEIsQ0FBQyxDQUFDO0NBQ04sQ0FBQzs7Ozs7QUFLRixPQUFPLENBQUMsWUFBWSxHQUFHLFVBQVMsR0FBRyxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUU7QUFDOUMsS0FBRyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQztDQUNuQixDQUFDIiwiZmlsZSI6Ii9Vc2Vycy9hZHJpYW4vY29kZS9tZWFuc2hvcC9zZXJ2ZXIvYXBpL3VzZXIvdXNlci5jb250cm9sbGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgVXNlciA9IHJlcXVpcmUoJy4vdXNlci5tb2RlbCcpO1xudmFyIHBhc3Nwb3J0ID0gcmVxdWlyZSgncGFzc3BvcnQnKTtcbnZhciBjb25maWcgPSByZXF1aXJlKCcuLi8uLi9jb25maWcvZW52aXJvbm1lbnQnKTtcbnZhciBqd3QgPSByZXF1aXJlKCdqc29ud2VidG9rZW4nKTtcblxuZnVuY3Rpb24gdmFsaWRhdGlvbkVycm9yKHJlcywgc3RhdHVzQ29kZSkge1xuICBzdGF0dXNDb2RlID0gc3RhdHVzQ29kZSB8fCA0MjI7XG4gIHJldHVybiBmdW5jdGlvbihlcnIpIHtcbiAgICByZXMuc3RhdHVzKHN0YXR1c0NvZGUpLmpzb24oZXJyKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBoYW5kbGVFcnJvcihyZXMsIHN0YXR1c0NvZGUpIHtcbiAgc3RhdHVzQ29kZSA9IHN0YXR1c0NvZGUgfHwgNTAwO1xuICByZXR1cm4gZnVuY3Rpb24oZXJyKSB7XG4gICAgcmVzLnN0YXR1cyhzdGF0dXNDb2RlKS5zZW5kKGVycik7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHJlc3BvbmRXaXRoKHJlcywgc3RhdHVzQ29kZSkge1xuICBzdGF0dXNDb2RlID0gc3RhdHVzQ29kZSB8fCAyMDA7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICByZXMuc3RhdHVzKHN0YXR1c0NvZGUpLmVuZCgpO1xuICB9O1xufVxuXG4vKipcbiAqIEdldCBsaXN0IG9mIHVzZXJzXG4gKiByZXN0cmljdGlvbjogJ2FkbWluJ1xuICovXG5leHBvcnRzLmluZGV4ID0gZnVuY3Rpb24ocmVxLCByZXMpIHtcbiAgVXNlci5maW5kQXN5bmMoe30sICctc2FsdCAtaGFzaGVkUGFzc3dvcmQnKVxuICAgIC50aGVuKGZ1bmN0aW9uKHVzZXJzKSB7XG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih1c2Vycyk7XG4gICAgfSlcbiAgICAuY2F0Y2goaGFuZGxlRXJyb3IocmVzKSk7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgdXNlclxuICovXG5leHBvcnRzLmNyZWF0ZSA9IGZ1bmN0aW9uKHJlcSwgcmVzLCBuZXh0KSB7XG4gIHZhciBuZXdVc2VyID0gbmV3IFVzZXIocmVxLmJvZHkpO1xuICBuZXdVc2VyLnByb3ZpZGVyID0gJ2xvY2FsJztcbiAgbmV3VXNlci5yb2xlID0gJ3VzZXInO1xuICBuZXdVc2VyLnNhdmVBc3luYygpXG4gICAgLnNwcmVhZChmdW5jdGlvbih1c2VyKSB7XG4gICAgICB2YXIgdG9rZW4gPSBqd3Quc2lnbih7IF9pZDogdXNlci5faWQgfSwgY29uZmlnLnNlY3JldHMuc2Vzc2lvbiwge1xuICAgICAgICBleHBpcmVzSW5NaW51dGVzOiA2MCAqIDVcbiAgICAgIH0pO1xuICAgICAgcmVzLmpzb24oeyB0b2tlbjogdG9rZW4gfSk7XG4gICAgfSlcbiAgICAuY2F0Y2godmFsaWRhdGlvbkVycm9yKHJlcykpO1xufTtcblxuLyoqXG4gKiBHZXQgYSBzaW5nbGUgdXNlclxuICovXG5leHBvcnRzLnNob3cgPSBmdW5jdGlvbihyZXEsIHJlcywgbmV4dCkge1xuICB2YXIgdXNlcklkID0gcmVxLnBhcmFtcy5pZDtcblxuICBVc2VyLmZpbmRCeUlkQXN5bmModXNlcklkKVxuICAgIC50aGVuKGZ1bmN0aW9uKHVzZXIpIHtcbiAgICAgIGlmICghdXNlcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmVuZCgpO1xuICAgICAgfVxuICAgICAgcmVzLmpzb24odXNlci5wcm9maWxlKTtcbiAgICB9KVxuICAgIC5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgIHJldHVybiBuZXh0KGVycik7XG4gICAgfSk7XG59O1xuXG4vKipcbiAqIERlbGV0ZXMgYSB1c2VyXG4gKiByZXN0cmljdGlvbjogJ2FkbWluJ1xuICovXG5leHBvcnRzLmRlc3Ryb3kgPSBmdW5jdGlvbihyZXEsIHJlcykge1xuICBVc2VyLmZpbmRCeUlkQW5kUmVtb3ZlQXN5bmMocmVxLnBhcmFtcy5pZClcbiAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgIHJlcy5zdGF0dXMoMjA0KS5lbmQoKTtcbiAgICB9KVxuICAgIC5jYXRjaChoYW5kbGVFcnJvcihyZXMpKTtcbn07XG5cbi8qKlxuICogQ2hhbmdlIGEgdXNlcnMgcGFzc3dvcmRcbiAqL1xuZXhwb3J0cy5jaGFuZ2VQYXNzd29yZCA9IGZ1bmN0aW9uKHJlcSwgcmVzLCBuZXh0KSB7XG4gIHZhciB1c2VySWQgPSByZXEudXNlci5faWQ7XG4gIHZhciBvbGRQYXNzID0gU3RyaW5nKHJlcS5ib2R5Lm9sZFBhc3N3b3JkKTtcbiAgdmFyIG5ld1Bhc3MgPSBTdHJpbmcocmVxLmJvZHkubmV3UGFzc3dvcmQpO1xuXG4gIFVzZXIuZmluZEJ5SWRBc3luYyh1c2VySWQpXG4gICAgLnRoZW4oZnVuY3Rpb24odXNlcikge1xuICAgICAgaWYgKHVzZXIuYXV0aGVudGljYXRlKG9sZFBhc3MpKSB7XG4gICAgICAgIHVzZXIucGFzc3dvcmQgPSBuZXdQYXNzO1xuICAgICAgICByZXR1cm4gdXNlci5zYXZlQXN5bmMoKVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmVzLnN0YXR1cygyMDQpLmVuZCgpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKHZhbGlkYXRpb25FcnJvcihyZXMpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuZW5kKCk7XG4gICAgICB9XG4gICAgfSk7XG59O1xuXG4vKipcbiAqIEdldCBteSBpbmZvXG4gKi9cbmV4cG9ydHMubWUgPSBmdW5jdGlvbihyZXEsIHJlcywgbmV4dCkge1xuICB2YXIgdXNlcklkID0gcmVxLnVzZXIuX2lkO1xuXG4gIFVzZXIuZmluZE9uZUFzeW5jKHsgX2lkOiB1c2VySWQgfSwgJy1zYWx0IC1oYXNoZWRQYXNzd29yZCcpXG4gICAgLnRoZW4oZnVuY3Rpb24odXNlcikgeyAvLyBkb24ndCBldmVyIGdpdmUgb3V0IHRoZSBwYXNzd29yZCBvciBzYWx0XG4gICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5lbmQoKTtcbiAgICAgIH1cbiAgICAgIHJlcy5qc29uKHVzZXIpO1xuICAgIH0pXG4gICAgLmNhdGNoKGZ1bmN0aW9uKGVycikge1xuICAgICAgcmV0dXJuIG5leHQoZXJyKTtcbiAgICB9KTtcbn07XG5cbi8qKlxuICogQXV0aGVudGljYXRpb24gY2FsbGJhY2tcbiAqL1xuZXhwb3J0cy5hdXRoQ2FsbGJhY2sgPSBmdW5jdGlvbihyZXEsIHJlcywgbmV4dCkge1xuICByZXMucmVkaXJlY3QoJy8nKTtcbn07XG4iXX0=</pre></td></tr>
</table></pre>

</div>
<div class="footer">
    <div class="meta">Generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Thu Aug 27 2015 23:38:07 GMT-0400 (AST)</div>
</div>
<script src="../../../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../../../sorter.js"></script>
</body>
</html>
